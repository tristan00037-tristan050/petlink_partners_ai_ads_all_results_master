<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í«ë§í¬ íŒŒíŠ¸ë„ˆìŠ¤ - ë°˜ë ¤ë™ë¬¼ ë“±ë¡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        /* í—¤ë” */
        header {
            background: #fff;
            border-bottom: 2px solid #e5e7eb;
            padding: 12px 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 22px;
            font-weight: 700;
            color: #667eea;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-icon {
            font-size: 28px;
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 5px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
        }

        .menu-toggle span {
            width: 28px;
            height: 3px;
            background: #667eea;
            border-radius: 3px;
            transition: all 0.3s;
        }

        .header-nav {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .header-link {
            padding: 12px 20px;
            color: #333;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            border-radius: 8px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }

        .header-link:hover {
            background: #f3f4f6;
            color: #667eea;
        }

        .header-link.active {
            background: #667eea;
            color: #fff;
        }

        .header-link-icon {
            font-size: 18px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px 40px;
        }

        .page-title {
            font-size: 36px;
            margin-bottom: 10px;
            color: #111;
            font-weight: 700;
        }

        .page-subtitle {
            color: #666;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .form-section {
            background: #fff;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #111;
        }

        .form-label .required {
            color: #ef4444;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            min-height: 120px;
            resize: vertical;
            transition: border-color 0.2s;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .upload-area {
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            background: #f9fafb;
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: #eff6ff;
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .upload-text {
            font-size: 16px;
            color: #666;
            margin-bottom: 8px;
        }

        .upload-hint {
            font-size: 14px;
            color: #9ca3af;
        }

        .file-list {
            margin-top: 20px;
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .file-preview {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .file-size {
            font-size: 14px;
            color: #666;
        }

        .file-actions {
            display: flex;
            gap: 8px;
        }

        .btn-remove {
            padding: 8px 16px;
            background: #fee2e2;
            color: #991b1b;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-remove:hover {
            background: #fecaca;
        }

        .btn-enhance {
            padding: 8px 16px;
            background: #dbeafe;
            color: #1e40af;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-enhance:hover {
            background: #bfdbfe;
        }

        .btn-enhance.processing {
            background: #f3f4f6;
            color: #6b7280;
            cursor: not-allowed;
        }

        .limit-info {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 12px 16px;
            border-radius: 6px;
            margin-top: 12px;
            font-size: 14px;
            color: #1e40af;
        }

        .limit-info.error {
            background: #fef2f2;
            border-left-color: #ef4444;
            color: #991b1b;
        }

        .submit-section {
            background: #fff;
            border-radius: 16px;
            padding: 30px 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-submit {
            padding: 16px 40px;
            background: #667eea;
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-submit:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-submit:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: #667eea;
            transition: width 0.3s;
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: flex;
            }

            .header-nav {
                position: fixed;
                top: 60px;
                left: 0;
                right: 0;
                background: #fff;
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                transform: translateY(-100%);
                opacity: 0;
                pointer-events: none;
                transition: all 0.3s;
            }

            .header-nav.active {
                transform: translateY(0);
                opacity: 1;
                pointer-events: all;
            }

            .header-link {
                width: 100%;
                padding: 16px 20px;
                font-size: 18px;
            }

            .form-section {
                padding: 30px 20px;
            }

            .submit-section {
                flex-direction: column;
                gap: 20px;
                padding: 30px 20px;
            }

            .btn-submit {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="/landing.html" class="logo">
                <span class="logo-icon">ğŸ¾</span>
                <span>í«ë§í¬ íŒŒíŠ¸ë„ˆìŠ¤</span>
            </a>
            <button class="menu-toggle" onclick="toggleMenu()" aria-label="ë©”ë‰´">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="header-nav" id="headerNav">
                <a href="/landing.html" class="header-link">
                    <span class="header-link-icon">ğŸ </span>
                    <span>í™ˆ</span>
                </a>
                <a href="/pricing.html" class="header-link">
                    <span class="header-link-icon">ğŸ’°</span>
                    <span>ìš”ê¸ˆì œ</span>
                </a>
                <a href="/help.html" class="header-link">
                    <span class="header-link-icon">â“</span>
                    <span>ë„ì›€ë§</span>
                </a>
                <a href="/franchise-hq.html" class="header-link">
                    <span class="header-link-icon">ğŸ¢</span>
                    <span>ë³¸ì‚¬ ê´€ë¦¬</span>
                </a>
                <a href="/status.html" class="header-link">
                    <span class="header-link-icon">ğŸ“Š</span>
                    <span>ì„œë¹„ìŠ¤ ìƒíƒœ</span>
                </a>
            </nav>
        </div>
    </header>

    <div class="container">
        <h1 class="page-title">ë°˜ë ¤ë™ë¬¼ ë“±ë¡</h1>
        <p class="page-subtitle">ë°˜ë ¤ë™ë¬¼ ì •ë³´ë¥¼ ë“±ë¡í•˜ì„¸ìš”. ë“±ë¡í•˜ì‹œë©´ ìë™ìœ¼ë¡œ ê´‘ê³ ê°€ ì‹œì‘ë©ë‹ˆë‹¤.</p>

        <form id="petRegisterForm">
            <!-- ê¸°ë³¸ ì •ë³´ -->
            <div class="form-section">
                <h2 style="font-size: 24px; margin-bottom: 24px; color: #111;">ê¸°ë³¸ ì •ë³´</h2>
                
                <div class="form-group">
                    <label class="form-label">
                        ë°˜ë ¤ë™ë¬¼ ì´ë¦„ <span class="required">*</span>
                    </label>
                    <input type="text" class="form-input" name="pet_name" required placeholder="ì˜ˆ: ë½€ì‚">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        ì¢…ë¥˜ <span class="required">*</span>
                    </label>
                    <select class="form-input" name="pet_type" required>
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="dog">ê°•ì•„ì§€</option>
                        <option value="cat">ê³ ì–‘ì´</option>
                        <option value="other">ê¸°íƒ€</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        í’ˆì¢…
                    </label>
                    <input type="text" class="form-input" name="breed" placeholder="ì˜ˆ: ê³¨ë“  ë¦¬íŠ¸ë¦¬ë²„">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        ë‚˜ì´
                    </label>
                    <input type="text" class="form-input" name="age" placeholder="ì˜ˆ: 3ê°œì›”">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        ì„±ë³„
                    </label>
                    <select class="form-input" name="gender">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="male">ìˆ˜ì»·</option>
                        <option value="female">ì•”ì»·</option>
                        <option value="unknown">ëª¨ë¦„</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        ì†Œê°œê¸€ <span class="required">*</span>
                    </label>
                    <textarea 
                        class="form-textarea" 
                        name="description" 
                        id="descriptionInput"
                        required
                        maxlength="2200"
                        placeholder="ë°˜ë ¤ë™ë¬¼ì— ëŒ€í•œ ì†Œê°œê¸€ì„ ì‘ì„±í•˜ì„¸ìš”. í•´ì‹œíƒœê·¸(#)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&#10;&#10;ì˜ˆì‹œ:&#10;ì‚¬ë‘ìŠ¤ëŸ¬ìš´ í¬ë©”ë¼ë‹ˆì•ˆ ê°•ì•„ì§€ ìƒˆ ê°€ì¡±ì„ ì°¾ê³  ìˆìŠµë‹ˆë‹¤! í™œë°œí•˜ê³  ì• êµ ë§ì€ ì„±ê²©ìœ¼ë¡œ ê°€ì¡±ì˜ ì¼ì›ìœ¼ë¡œ ë”±ì´ì—ìš”. #í¬ë©”ë¼ë‹ˆì•ˆ #ê°•ì•„ì§€ì…ì–‘ #ë°˜ë ¤ë™ë¬¼"
                        rows="6"
                    ></textarea>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                        <div style="font-size: 12px; color: #666;">
                            <span id="charCount">0</span> / 2,200ì 
                            <span style="margin-left: 12px; color: #9ca3af;">
                                (ì¸ìŠ¤íƒ€ê·¸ë¨/í˜ì´ìŠ¤ë¶/í‹±í†¡ ìµœëŒ€ ê¸¸ì´)
                            </span>
                        </div>
                        <div style="font-size: 11px; color: #ef4444; display: none;" id="forbiddenWarning">
                            âš ï¸ ì „í™”ë²ˆí˜¸, ì¹´ì¹´ì˜¤í†¡, ì£¼ì†ŒëŠ” ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
                        </div>
                    </div>
                    <div style="font-size: 12px; color: #667eea; margin-top: 4px;">
                        ğŸ’¡ ë§¤ì¥ ìƒí˜¸ëª…ì€ í¬í•¨ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•´ì‹œíƒœê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë” ë§ì€ ì‚¬ëŒë“¤ì—ê²Œ ë…¸ì¶œë©ë‹ˆë‹¤.
                    </div>
                    
                    <!-- ê¸ˆì¹™ì–´ ì•ˆë‚´ ì„¹ì…˜ -->
                    <div style="background: #fef3c7; border: 1px solid #fbbf24; border-radius: 12px; padding: 20px; margin-top: 20px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                            <span style="font-size: 20px;">âš ï¸</span>
                            <h3 style="font-size: 16px; font-weight: 700; color: #92400e; margin: 0;">ê¸ˆì¹™ì–´ ì•ˆë‚´</h3>
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <p style="font-size: 14px; color: #78350f; line-height: 1.6; margin-bottom: 12px;">
                                ì†Œê°œê¸€ì—ëŠ” ë‹¤ìŒ ë‚´ìš©ì„ í¬í•¨í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ê° ê´‘ê³  í”Œë«í¼ì˜ ì •ì±…ì„ ì¤€ìˆ˜í•˜ê³ , ì•ˆì „í•œ ê±°ë˜ í™˜ê²½ì„ ë§Œë“¤ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.
                            </p>
                        </div>
                        
                        <div style="background: #fff; border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                            <div style="font-size: 14px; font-weight: 600; color: #78350f; margin-bottom: 12px;">âŒ ê¸ˆì§€ í•­ëª© ì˜ˆì‹œ:</div>
                            <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #92400e; line-height: 1.8;">
                                <li><strong>ì—°ë½ì²˜ ì •ë³´:</strong> ì „í™”ë²ˆí˜¸ (ì˜ˆ: 010-1234-5678, 01012345678)</li>
                                <li><strong>ë©”ì‹ ì € ì •ë³´:</strong> ì¹´ì¹´ì˜¤í†¡, ì¹´í†¡, ì¹´ì¹´ì˜¤í†¡ ID</li>
                                <li><strong>ì£¼ì†Œ ì •ë³´:</strong> ìƒì„¸ ì£¼ì†Œ, ë„ë¡œëª… ì£¼ì†Œ, ì§€ë²ˆ ì£¼ì†Œ</li>
                                <li><strong>ê³¼ì¥ëœ í‘œí˜„:</strong> "ë¬´ë£Œ", "ê³µì§œ", "100% ë³´ì¥", "ì „ì•¡í™˜ë¶ˆ" ë“±</li>
                            </ul>
                        </div>
                        
                        <div style="background: #ecfdf5; border-left: 4px solid #10b981; border-radius: 8px; padding: 16px;">
                            <div style="font-size: 14px; font-weight: 600; color: #065f46; margin-bottom: 8px;">ğŸ’¡ ì™œ ê¸ˆì§€ë˜ë‚˜ìš”?</div>
                            <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #047857; line-height: 1.8;">
                                <li><strong>í”Œë«í¼ ì •ì±… ì¤€ìˆ˜:</strong> ì¸ìŠ¤íƒ€ê·¸ë¨, í˜ì´ìŠ¤ë¶, í‹±í†¡ ë“±ì€ ì§ì ‘ ì—°ë½ì²˜ë‚˜ ì£¼ì†Œ ê³µê°œë¥¼ ì œí•œí•©ë‹ˆë‹¤.</li>
                                <li><strong>ì‚¬ê¸° ë°©ì§€:</strong> ê°œì¸ì •ë³´ ë…¸ì¶œì„ ìµœì†Œí™”í•˜ì—¬ ì•ˆì „í•œ ê±°ë˜ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.</li>
                                <li><strong>ê´‘ê³  ìŠ¹ì¸ë¥  í–¥ìƒ:</strong> ì •ì±… ìœ„ë°˜ìœ¼ë¡œ ì¸í•œ ê´‘ê³  ê±°ë¶€ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.</li>
                                <li><strong>ê³¼ì¥ ê´‘ê³  ë°©ì§€:</strong> ê³¼ë„í•œ í‘œí˜„ì€ ê´‘ê³  í”Œë«í¼ì—ì„œ ì œì¬ ëŒ€ìƒì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 12px; padding: 12px; background: #dbeafe; border-radius: 8px;">
                            <div style="font-size: 13px; color: #1e40af; line-height: 1.6;">
                                <strong>âœ… ëŒ€ì•ˆ:</strong> ì—°ë½ì´ í•„ìš”í•˜ì‹œë©´ ë§¤ì¥ ìƒí˜¸ëª…ì„ í¬í•¨í•˜ê±°ë‚˜, í”Œë«í¼ì˜ ë©”ì‹œì§€ ê¸°ëŠ¥ì„ í™œìš©í•˜ì„¸ìš”. 
                                ë§¤ì¥ ì •ë³´ëŠ” ë³„ë„ë¡œ ë“±ë¡í•  ìˆ˜ ìˆìœ¼ë©°, ê´€ì‹¬ ìˆëŠ” ë¶„ë“¤ì´ ë¬¸ì˜í•  ìˆ˜ ìˆëŠ” ì•ˆì „í•œ ê²½ë¡œë¥¼ ì œê³µí•©ë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì‚¬ì§„ ì—…ë¡œë“œ -->
            <div class="form-section">
                <h2 style="font-size: 24px; margin-bottom: 24px; color: #111;">ì‚¬ì§„ ë“±ë¡</h2>
                
                <div class="upload-area" id="photoUploadArea">
                    <div class="upload-icon">ğŸ“·</div>
                    <div class="upload-text">ì‚¬ì§„ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
                    <div class="upload-hint">ìµœëŒ€ 10ì¥, ê° íŒŒì¼ 5MB ì´í•˜ (JPG, PNG, WEBP)</div>
                    <input type="file" id="photoInput" multiple accept="image/jpeg,image/png,image/webp" style="display: none;">
                </div>

                <div class="limit-info" id="photoLimitInfo">
                    ğŸ“¸ ì‚¬ì§„: <span id="photoCount">0</span> / 10ì¥ | ì´ ìš©ëŸ‰: <span id="photoTotalSize">0</span> MB
                </div>

                <div class="file-list" id="photoList"></div>
            </div>

            <!-- ì˜ìƒ ì—…ë¡œë“œ -->
            <div class="form-section">
                <h2 style="font-size: 24px; margin-bottom: 24px; color: #111;">ì˜ìƒ ë“±ë¡ (ì„ íƒ)</h2>
                
                <div class="upload-area" id="videoUploadArea">
                    <div class="upload-icon">ğŸ¥</div>
                    <div class="upload-text">ì˜ìƒì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
                    <div class="upload-hint">ìµœëŒ€ 3ê°œ, ê° íŒŒì¼ 100MB ì´í•˜ (MP4, MOV, AVI)</div>
                    <input type="file" id="videoInput" multiple accept="video/mp4,video/quicktime,video/x-msvideo" style="display: none;">
                </div>

                <div class="limit-info" id="videoLimitInfo">
                    ğŸ¥ ì˜ìƒ: <span id="videoCount">0</span> / 3ê°œ | ì´ ìš©ëŸ‰: <span id="videoTotalSize">0</span> MB
                </div>

                <div class="file-list" id="videoList"></div>
            </div>

            <!-- ì±„ë„ ì„ íƒ (v2.5) -->
            <div class="form-section" style="margin-top: 30px;">
                <h2 style="font-size: 20px; margin-bottom: 20px; color: #111;">ê´‘ê³  ë…¸ì¶œ ì±„ë„ ì„ íƒ</h2>
                
                <div style="margin-bottom: 20px;">
                    <label class="animal-override-checkbox" style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; cursor: pointer;">
                        <input type="checkbox" id="useChannelOverride" style="width: 20px; height: 20px; accent-color: #667eea;">
                        <span style="font-size: 16px; color: #333;">ë§¤ì¥ ê¸°ë³¸ ì„¤ì • ì‚¬ìš© (ê¶Œì¥)</span>
                    </label>
                    <p style="font-size: 14px; color: #666; margin-left: 32px; line-height: 1.6;">
                        ë§¤ì¥ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ì±„ë„ì— ìë™ìœ¼ë¡œ ë…¸ì¶œë©ë‹ˆë‹¤. íŠ¹ì • ì±„ë„ë§Œ ì„ íƒí•˜ë ¤ë©´ ì²´í¬ë¥¼ í•´ì œí•˜ì„¸ìš”.
                    </p>
                </div>
                
                <div id="channelOverrideOptions" style="display: none;">
                    <div class="channel-checkboxes" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px;">
                        <label class="channel-checkbox-label" style="display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: #fff; border: 2px solid #e5e7eb; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                            <input type="checkbox" id="animalIgEnabled" style="width: 20px; height: 20px; accent-color: #667eea;">
                            <span>ì¸ìŠ¤íƒ€ê·¸ë¨/í˜ì´ìŠ¤ë¶</span>
                        </label>
                        <label class="channel-checkbox-label" style="display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: #fff; border: 2px solid #e5e7eb; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                            <input type="checkbox" id="animalTtEnabled" style="width: 20px; height: 20px; accent-color: #667eea;">
                            <span>í‹±í†¡</span>
                        </label>
                        <label class="channel-checkbox-label" style="display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: #fff; border: 2px solid #e5e7eb; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                            <input type="checkbox" id="animalYtEnabled" style="width: 20px; height: 20px; accent-color: #667eea;">
                            <span>ìœ íŠœë¸Œ</span>
                        </label>
                        <label class="channel-checkbox-label" style="display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: #fff; border: 2px solid #e5e7eb; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                            <input type="checkbox" id="animalKakaoEnabled" style="width: 20px; height: 20px; accent-color: #667eea;">
                            <span>ì¹´ì¹´ì˜¤</span>
                        </label>
                        <label class="channel-checkbox-label" style="display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: #fff; border: 2px solid #e5e7eb; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                            <input type="checkbox" id="animalNaverEnabled" style="width: 20px; height: 20px; accent-color: #667eea;">
                            <span>ë„¤ì´ë²„</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ì œì¶œ ë²„íŠ¼ -->
            <div class="submit-section">
                <div>
                    <div style="font-size: 14px; color: #666; margin-bottom: 8px;">ë“±ë¡ í›„ ìë™ìœ¼ë¡œ ê´‘ê³ ê°€ ì‹œì‘ë©ë‹ˆë‹¤</div>
                    <div style="font-size: 12px; color: #9ca3af;">ì„ íƒí•œ ì±„ë„ì— ìë™ìœ¼ë¡œ ë…¸ì¶œë©ë‹ˆë‹¤</div>
                </div>
                <button type="submit" class="btn-submit" id="submitBtn">ë“±ë¡í•˜ê¸°</button>
            </div>
        </form>
    </div>

    <script>
        // ì„¤ì •ê°’
        const MAX_PHOTOS = 10;
        const MAX_PHOTO_SIZE = 5 * 1024 * 1024; // 5MB
        const MAX_VIDEOS = 3;
        const MAX_VIDEO_SIZE = 100 * 1024 * 1024; // 100MB
        const ALLOWED_PHOTO_TYPES = ['image/jpeg', 'image/png', 'image/webp'];
        const ALLOWED_VIDEO_TYPES = ['video/mp4', 'video/quicktime', 'video/x-msvideo'];

        let photos = [];
        let videos = [];

        // ì†Œê°œê¸€ ê¸€ììˆ˜ ì œí•œ ë° ê¸ˆì§€ ë‹¨ì–´ í•„í„°ë§
        const MAX_DESCRIPTION_LENGTH = 2200; // ì¸ìŠ¤íƒ€ê·¸ë¨/í˜ì´ìŠ¤ë¶/í‹±í†¡ ìµœëŒ€ ê¸¸ì´
        const FORBIDDEN_PATTERNS = [
            // ì „í™”ë²ˆí˜¸ íŒ¨í„´ (010-1234-5678, 01012345678, 02-123-4567 ë“±)
            /\d{2,3}[-.\s]?\d{3,4}[-.\s]?\d{4}/g,
            // ì¹´ì¹´ì˜¤í†¡ íŒ¨í„´ (ì¹´í†¡, ì¹´ì¹´ì˜¤í†¡, kakaotalk ë“±)
            /ì¹´[í†³í†¡]|ì¹´ì¹´ì˜¤í†¡|kakaotalk|kakao\s*talk/gi,
            // ì£¼ì†Œ íŒ¨í„´ (ì‹œ, êµ¬, ë™, ë²ˆì§€ ë“±)
            /(ì„œìš¸|ë¶€ì‚°|ëŒ€êµ¬|ì¸ì²œ|ê´‘ì£¼|ëŒ€ì „|ìš¸ì‚°|ì„¸ì¢…|ê²½ê¸°|ê°•ì›|ì¶©ë¶|ì¶©ë‚¨|ì „ë¶|ì „ë‚¨|ê²½ë¶|ê²½ë‚¨|ì œì£¼)\s*(ì‹œ|ë„|íŠ¹ë³„ì‹œ|ê´‘ì—­ì‹œ)?/g,
            /[ê°€-í£]{1,3}(ì‹œ|ë„|êµ¬|êµ°|ì|ë©´|ë™|ë¦¬|ë²ˆì§€)/g,
            // ìš°í¸ë²ˆí˜¸ íŒ¨í„´
            /\d{5}/g
        ];

        // ì†Œê°œê¸€ ì…ë ¥ ì´ë²¤íŠ¸
        const descriptionInput = document.getElementById('descriptionInput');
        const charCount = document.getElementById('charCount');
        const forbiddenWarning = document.getElementById('forbiddenWarning');

        descriptionInput.addEventListener('input', function() {
            let text = this.value;
            
            // ê¸€ììˆ˜ ì¹´ìš´íŠ¸
            const currentLength = text.length;
            charCount.textContent = currentLength;
            
            // ê¸€ììˆ˜ ìƒ‰ìƒ ë³€ê²½
            if (currentLength > MAX_DESCRIPTION_LENGTH * 0.9) {
                charCount.style.color = '#ef4444';
            } else if (currentLength > MAX_DESCRIPTION_LENGTH * 0.7) {
                charCount.style.color = '#f59e0b';
            } else {
                charCount.style.color = '#666';
            }
            
            // ê¸ˆì§€ ë‹¨ì–´ ê²€ì‚¬
            let hasForbidden = false;
            for (const pattern of FORBIDDEN_PATTERNS) {
                if (pattern.test(text)) {
                    hasForbidden = true;
                    break;
                }
            }
            
            if (hasForbidden) {
                forbiddenWarning.style.display = 'block';
                this.style.borderColor = '#ef4444';
            } else {
                forbiddenWarning.style.display = 'none';
                this.style.borderColor = '';
            }
        });

        // í¼ ì œì¶œ ì‹œ ê¸ˆì§€ ë‹¨ì–´ ìµœì¢… ê²€ì‚¬
        function validateDescription(text) {
            for (const pattern of FORBIDDEN_PATTERNS) {
                if (pattern.test(text)) {
                    return {
                        valid: false,
                        message: 'ì†Œê°œê¸€ì— ì „í™”ë²ˆí˜¸, ì¹´ì¹´ì˜¤í†¡, ì£¼ì†Œ ë“± ì—°ë½ì²˜ ì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
                    };
                }
            }
            return { valid: true };
        }

        // ë©”ë‰´ í† ê¸€
        function toggleMenu() {
            const nav = document.getElementById('headerNav');
            nav.classList.toggle('active');
        }

        document.addEventListener('click', function(event) {
            const nav = document.getElementById('headerNav');
            const toggle = document.querySelector('.menu-toggle');
            
            if (!nav.contains(event.target) && !toggle.contains(event.target)) {
                nav.classList.remove('active');
            }
        });

        // íŒŒì¼ í¬ê¸° í¬ë§·
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
        }

        // ì‚¬ì§„ ì—…ë¡œë“œ
        const photoInput = document.getElementById('photoInput');
        const photoUploadArea = document.getElementById('photoUploadArea');
        const photoList = document.getElementById('photoList');

        photoUploadArea.addEventListener('click', () => photoInput.click());
        photoUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            photoUploadArea.classList.add('dragover');
        });
        photoUploadArea.addEventListener('dragleave', () => {
            photoUploadArea.classList.remove('dragover');
        });
        photoUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            photoUploadArea.classList.remove('dragover');
            handlePhotoFiles(Array.from(e.dataTransfer.files));
        });

        photoInput.addEventListener('change', (e) => {
            handlePhotoFiles(Array.from(e.target.files));
        });

        function handlePhotoFiles(files) {
            files.forEach(file => {
                if (photos.length >= MAX_PHOTOS) {
                    alert(`ì‚¬ì§„ì€ ìµœëŒ€ ${MAX_PHOTOS}ì¥ê¹Œì§€ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                    return;
                }

                if (!ALLOWED_PHOTO_TYPES.includes(file.type)) {
                    alert('JPG, PNG, WEBP í˜•ì‹ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    return;
                }

                if (file.size > MAX_PHOTO_SIZE) {
                    alert(`ê° ì‚¬ì§„ì€ ìµœëŒ€ ${formatFileSize(MAX_PHOTO_SIZE)}ê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    photos.push({
                        file: file,
                        preview: e.target.result,
                        enhanced: false
                    });
                    updatePhotoList();
                };
                reader.readAsDataURL(file);
            });
        }

        function updatePhotoList() {
            photoList.innerHTML = '';
            let totalSize = 0;

            photos.forEach((photo, index) => {
                totalSize += photo.file.size;
                const item = document.createElement('div');
                item.className = 'file-item';
                item.innerHTML = `
                    <img src="${photo.preview}" class="file-preview" alt="ë¯¸ë¦¬ë³´ê¸°">
                    <div class="file-info">
                        <div class="file-name">${photo.file.name}</div>
                        <div class="file-size">${formatFileSize(photo.file.size)}</div>
                    </div>
                    <div class="file-actions">
                        <button type="button" class="btn-enhance ${photo.enhanced ? 'processing' : ''}" onclick="enhancePhoto(${index})">
                            ${photo.enhanced ? 'âœ“ ë³´ì • ì™„ë£Œ' : 'âœ¨ ìë™ ë³´ì •'}
                        </button>
                        <button type="button" class="btn-remove" onclick="removePhoto(${index})">ì‚­ì œ</button>
                    </div>
                `;
                photoList.appendChild(item);
            });

            document.getElementById('photoCount').textContent = photos.length;
            document.getElementById('photoTotalSize').textContent = (totalSize / (1024 * 1024)).toFixed(2);

            const limitInfo = document.getElementById('photoLimitInfo');
            if (photos.length >= MAX_PHOTOS) {
                limitInfo.classList.add('error');
                limitInfo.textContent = `âš ï¸ ì‚¬ì§„ì€ ìµœëŒ€ ${MAX_PHOTOS}ì¥ê¹Œì§€ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            } else {
                limitInfo.classList.remove('error');
                limitInfo.innerHTML = `ğŸ“¸ ì‚¬ì§„: <span id="photoCount">${photos.length}</span> / ${MAX_PHOTOS}ì¥ | ì´ ìš©ëŸ‰: <span id="photoTotalSize">${(totalSize / (1024 * 1024)).toFixed(2)}</span> MB`;
            }
        }

        function removePhoto(index) {
            photos.splice(index, 1);
            updatePhotoList();
        }

        async function enhancePhoto(index) {
            if (photos[index].enhanced) return;

            const btn = event.target;
            btn.classList.add('processing');
            btn.textContent = 'ë³´ì • ì¤‘...';

            try {
                // ì‹¤ì œë¡œëŠ” íŒŒì¼ì„ ì„œë²„ì— ì—…ë¡œë“œí•œ í›„ ë³´ì • ìš”ì²­
                // í˜„ì¬ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹œë®¬ë ˆì´ì…˜
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                photos[index].enhanced = true;
                updatePhotoList();
            } catch (error) {
                alert('ì´ë¯¸ì§€ ë³´ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                btn.classList.remove('processing');
                btn.textContent = 'âœ¨ ìë™ ë³´ì •';
            }
        }

        // ì˜ìƒ ì—…ë¡œë“œ
        const videoInput = document.getElementById('videoInput');
        const videoUploadArea = document.getElementById('videoUploadArea');
        const videoList = document.getElementById('videoList');

        videoUploadArea.addEventListener('click', () => videoInput.click());
        videoUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            videoUploadArea.classList.add('dragover');
        });
        videoUploadArea.addEventListener('dragleave', () => {
            videoUploadArea.classList.remove('dragover');
        });
        videoUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            videoUploadArea.classList.remove('dragover');
            handleVideoFiles(Array.from(e.dataTransfer.files));
        });

        videoInput.addEventListener('change', (e) => {
            handleVideoFiles(Array.from(e.target.files));
        });

        function handleVideoFiles(files) {
            files.forEach(file => {
                if (videos.length >= MAX_VIDEOS) {
                    alert(`ì˜ìƒì€ ìµœëŒ€ ${MAX_VIDEOS}ê°œê¹Œì§€ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                    return;
                }

                if (!ALLOWED_VIDEO_TYPES.includes(file.type)) {
                    alert('MP4, MOV, AVI í˜•ì‹ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    return;
                }

                if (file.size > MAX_VIDEO_SIZE) {
                    alert(`ê° ì˜ìƒì€ ìµœëŒ€ ${formatFileSize(MAX_VIDEO_SIZE)}ê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
                    return;
                }

                videos.push({ file: file });
                updateVideoList();
            });
        }

        function updateVideoList() {
            videoList.innerHTML = '';
            let totalSize = 0;

            videos.forEach((video, index) => {
                totalSize += video.file.size;
                const item = document.createElement('div');
                item.className = 'file-item';
                item.innerHTML = `
                    <div style="width: 80px; height: 80px; background: #e5e7eb; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 32px;">ğŸ¥</div>
                    <div class="file-info">
                        <div class="file-name">${video.file.name}</div>
                        <div class="file-size">${formatFileSize(video.file.size)}</div>
                    </div>
                    <div class="file-actions">
                        <button type="button" class="btn-remove" onclick="removeVideo(${index})">ì‚­ì œ</button>
                    </div>
                `;
                videoList.appendChild(item);
            });

            document.getElementById('videoCount').textContent = videos.length;
            document.getElementById('videoTotalSize').textContent = (totalSize / (1024 * 1024)).toFixed(2);

            const limitInfo = document.getElementById('videoLimitInfo');
            if (videos.length >= MAX_VIDEOS) {
                limitInfo.classList.add('error');
                limitInfo.textContent = `âš ï¸ ì˜ìƒì€ ìµœëŒ€ ${MAX_VIDEOS}ê°œê¹Œì§€ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            } else {
                limitInfo.classList.remove('error');
                limitInfo.innerHTML = `ğŸ¥ ì˜ìƒ: <span id="videoCount">${videos.length}</span> / ${MAX_VIDEOS}ê°œ | ì´ ìš©ëŸ‰: <span id="videoTotalSize">${(totalSize / (1024 * 1024)).toFixed(2)}</span> MB`;
            }
        }

        function removeVideo(index) {
            videos.splice(index, 1);
            updateVideoList();
        }

        // í¼ ì œì¶œ
        document.getElementById('petRegisterForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            if (photos.length === 0) {
                alert('ìµœì†Œ 1ì¥ì˜ ì‚¬ì§„ì„ ë“±ë¡í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì†Œê°œê¸€ ê²€ì¦
            const description = descriptionInput.value.trim();
            if (!description) {
                alert('ì†Œê°œê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                descriptionInput.focus();
                return;
            }

            if (description.length > MAX_DESCRIPTION_LENGTH) {
                alert(`ì†Œê°œê¸€ì€ ìµœëŒ€ ${MAX_DESCRIPTION_LENGTH}ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
                descriptionInput.focus();
                return;
            }

            const descriptionValidation = validateDescription(description);
            if (!descriptionValidation.valid) {
                alert(descriptionValidation.message);
                descriptionInput.focus();
                return;
            }

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'ë“±ë¡ ì¤‘...';

            // FormData ìƒì„±
            const formData = new FormData();
            const formDataObj = new FormData(e.target);
            
            // ê¸°ë³¸ ì •ë³´
            for (const [key, value] of formDataObj.entries()) {
                if (key !== 'photo' && key !== 'video') {
                    formData.append(key, value);
                }
            }

            // ì‚¬ì§„ ì¶”ê°€
            photos.forEach((photo, index) => {
                formData.append(`photos`, photo.file);
                formData.append(`photo_enhanced_${index}`, photo.enhanced);
            });

            // ì˜ìƒ ì¶”ê°€
            videos.forEach((video) => {
                formData.append(`videos`, video.file);
            });

            try {
                // v2.5: /animals API ì‚¬ìš© (ì±„ë„ ë¼ìš°íŒ… í¬í•¨)
                const storeId = 1; // ì‹¤ì œë¡œëŠ” ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ store_id
                const useOverride = !document.getElementById('useChannelOverride').checked;
                
                // ê¸°ë³¸ ì •ë³´ ì¶”ì¶œ
                const animalData = {
                    store_id: storeId,
                    name: formDataObj.get('pet_name'),
                    type: formDataObj.get('pet_type'),
                    breed: formDataObj.get('breed') || null,
                    age: formDataObj.get('age') || null,
                    gender: formDataObj.get('gender') || null,
                    description: description
                };
                
                // ë™ë¬¼ ë“±ë¡ (ì±„ë„ ë¼ìš°íŒ… í¬í•¨)
                const response = await fetch('http://localhost:3002/animals', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(animalData)
                });

                const result = await response.json();

                if (result.ok) {
                    const animalId = result.data.animal_id;
                    const scheduledChannels = result.data.scheduled_channels || [];
                    
                    // ë™ë¬¼ ì˜ˆì™¸ ì„¤ì •ì´ ìˆìœ¼ë©´ ì €ì¥
                    if (useOverride && scheduledChannels.length > 0) {
                        const overridePrefs = {
                            ig_enabled: document.getElementById('animalIgEnabled').checked ? true : null,
                            tt_enabled: document.getElementById('animalTtEnabled').checked ? true : null,
                            yt_enabled: document.getElementById('animalYtEnabled').checked ? true : null,
                            kakao_enabled: document.getElementById('animalKakaoEnabled').checked ? true : null,
                            naver_enabled: document.getElementById('animalNaverEnabled').checked ? true : null
                        };
                        
                        await fetch(`http://localhost:3002/animals/${animalId}/channel-overrides`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(overridePrefs)
                        });
                    }
                    
                    // ì±„ë„ ì •ë³´ í‘œì‹œ
                    let channelMessage = '';
                    if (scheduledChannels.length === 0) {
                        channelMessage = 'í™œì„±í™”ëœ ì±„ë„ì´ ì—†ì–´ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                    } else {
                        const channelNames = scheduledChannels.map(ch => {
                            if (ch === 'INSTAGRAM' || ch === 'FACEBOOK') return 'ì¸ìŠ¤íƒ€ê·¸ë¨/í˜ì´ìŠ¤ë¶';
                            if (ch === 'TIKTOK') return 'í‹±í†¡';
                            if (ch === 'YOUTUBE') return 'ìœ íŠœë¸Œ';
                            if (ch === 'KAKAO') return 'ì¹´ì¹´ì˜¤';
                            if (ch === 'NAVER') return 'ë„¤ì´ë²„';
                            return ch;
                        });
                        channelMessage = `ì´ë²ˆ ê²Œì‹œë¬¼ì€ ${channelNames.join(', ')}ì— ìë™ ë…¸ì¶œë©ë‹ˆë‹¤.`;
                    }
                    
                    alert(`ë°˜ë ¤ë™ë¬¼ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n${channelMessage}`);
                    window.location.href = '/index.html';
                } else {
                    alert(result.error || 'ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'ë“±ë¡í•˜ê¸°';
                }
            } catch (error) {
                console.error('Registration error:', error);
                alert('ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                submitBtn.disabled = false;
                submitBtn.textContent = 'ë“±ë¡í•˜ê¸°';
            }
        });

        // ì±„ë„ ì˜ˆì™¸ ì„¤ì • í† ê¸€
        document.getElementById('useChannelOverride').addEventListener('change', (e) => {
            document.getElementById('channelOverrideOptions').style.display = e.target.checked ? 'none' : 'block';
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸€ììˆ˜ ì¹´ìš´í„° ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            if (descriptionInput && charCount) {
                charCount.textContent = descriptionInput.value.length;
            }
            // ì±„ë„ ì˜ˆì™¸ ì„¤ì • ê¸°ë³¸ê°’: ë§¤ì¥ ê¸°ë³¸ ì‚¬ìš©
            document.getElementById('useChannelOverride').checked = true;
        });
    </script>
</body>
</html>

